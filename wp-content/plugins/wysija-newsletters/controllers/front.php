<?php
defined('WYSIJA') or die('Restricted access'); class WYSIJA_control_front extends WYSIJA_control{ function WYSIJA_control_front($extension="wysija-newsletters"){ $this->extension=$extension; parent::WYSIJA_control(); $_REQUEST = stripslashes_deep($_REQUEST); $_POST = stripslashes_deep($_POST); } function save(){ $this->requireSecurity(); $conditions=$this->getPKVal($this->modelObj); if($conditions){ $result=$this->modelObj->update($_REQUEST['wysija'][$this->model],$conditions); if($result) $this->notice($this->messages['update'][true]); else{ $this->error($this->messages['update'][false],true); } }else{ unset($_REQUEST['wysija'][$this->modelObj->pk]); $result=$this->modelObj->insert($_REQUEST['wysija'][$this->model]); if($result) $this->notice($this->messages['insert'][true]); else{ $this->error($this->messages['insert'][false],true); } } return $result; } function redirect($location){ wp_redirect($location); exit; } } 